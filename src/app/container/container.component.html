<div class="container">
  <div class="row">
    <h3>
      <span id="verifiedIcon" *ngIf="tool?.versionVerified">
        <a href={{tool?.verifiedLinks}}>
          <span class="glyphicon glyphicon-ok" tooltip="Verified"></span>
        </a>
      </span>
      {{ title }}
    </h3>
    <div *ngIf="tool">
      <span class="label label-default container-label" *ngFor="let label of labels">
        {{label}}
      </span>
    </div>
    <p class="update">
      Last build: {{ tool?.agoMessage || 'n/a' }}
    </p>
    <div class="row">
    <div class="ds-tabs col-sm-12 col-md-9 col-lg-9" >
      <tabset id="tool_tabs" justified="true">
        <tab id="infoTab" heading="Info" id="infoTab">
          <div>
            <ul class="list-unstyled container-info" *ngIf="tool">
              <li>
                <strong tooltip="Author listed in descriptor">Author</strong>:
                {{ tool?.author || 'n/a' }}
              </li>
              <li>
                <strong tooltip="E-mail of corresponding author for tool">E-mail</strong>:
                <span *ngIf="!tool?.email">n/a</span>
                <a *ngIf="tool?.email" href="mailto:{{tool?.email}}">
                  {{ tool?.email }}
                </a>
              </li>
              <li>
                <strong tooltip="Git repository for the associated tool descriptors and Dockerfile">GitHub</strong>:
                <a [href]="tool?.providerUrl">
                  {{ tool?.providerUrl }}
                </a>
              </li>
              <li>
                <strong tooltip="Docker registry for the associated Docker images">Quay.io</strong>:
                <a [href]="tool?.imgProviderUrl">
                  {{ tool?.imgProviderUrl }}
                </a>
              </li>
              <li>
                <strong tooltip="Path in Git repository to the tool's Dockerfile">Dockerfile Path</strong>:
                {{ tool?.default_dockerfile_path }}
              </li>
              <li>
                <strong tooltip="Path in Git repository to main CWL descriptor file">CWL Path</strong>:
                {{ tool?.default_cwl_path || 'n/a' }}
              </li>

              <li>
                <strong tooltip="Path in Git repository to main WDL descriptor file">WDL Path</strong>:
                {{ tool?.default_wdl_path || 'n/a' }}
              </li>
              <li>
                <strong tooltip="{{tool?.buildModeTooltip}}">Build Mode</strong>:
                {{ tool?.buildMode }}
              </li>
              <li>
                <strong tooltip="Date and time of the last build of the Docker image">Last Build</strong>:
                {{ tool?.lastBuildDate }}
              </li>
              <li>
                <strong tooltip="Date and time of the last update to the Tool entry">Last Updated</strong>:
                {{ tool?.lastUpdatedDate }}
              </li>
            </ul>
          </div>
          <div *ngIf="tool">
            <label tooltip="Description of tool obtained from tool descriptor">
              Description
            </label>
            <div class="well well-sm">
              <pre>{{ tool?.description || 'No description associated with this container.' }}</pre>
            </div>
            <div *ngIf="validVersions">
              <app-launch [versions]="validVersions" [default]="defaultVersion" [path]="tool?.path"></app-launch>
            </div>
          </div>
        </tab>
        <tab id="labelsTab" heading="Labels">
          <ul class="list-unstyled container-info">
            <li *ngIf="tool">
              <strong>Labels:</strong>
              <span *ngIf="tool?.labels.length === 0">n/a</span>
              <span class="label label-default container-label" *ngFor="let label of labels">
               {{label}}
            </span>
            </li>
          </ul>
        </tab>
        <tab heading="Versions" *ngIf="validVersions">
          <app-versions-container [versions]="tool?.tags" id ="versionsTab"
                                  [verifiedSource]="tool?.verifiedSources">
          </app-versions-container>
        </tab>
        <tab heading="Files" *ngIf="validVersions">
          <app-files-container [id]="tool?.id" [versions]="validVersions"
                               [default]="defaultVersion">
          </app-files-container>
        </tab>
      </tabset>
    </div>
    <div class="col-sm-12 col-md-3 col-lg-3" *ngIf="isToolPublic">
      <div>{{isToolPublic}}</div>
      <div class="panel panel-default" *ngIf="tool">
        <div class="panel-heading">
          <strong>Docker Pull Command</strong>
        </div>
        <div class="panel-body">
            <div class="input-group">
              <input type="text" class="form-control" [(ngModel)]="dockerPullCmd" value="{{dockerPullCmd}}" readonly>
              <span class="input-group-btn">
                <button class="btn btn-default" [class.btn-success]="isCopied" type="button" ngxClipboard
                        [cbContent]="dockerPullCmd"
                        (cbOnSuccess)="isCopied = true">
                  <span class="glyphicon glyphicon-copy"></span>
                </button>
              </span>
            </div>
        </div>
      </div>

      <div class="panel panel-default" *ngIf="tool">
        <div class="panel-heading">
          <strong>Source Repositories</strong>
        </div>
        <div class="panel-body">
          <div class="container-source-repos">
            <p>
              Git Repository:
              <span *ngIf="tool.provider">
                  <a [href]="tool.providerUrl">
                    {{tool.provider}}
                    <span class="glyphicon glyphicon-new-window"></span>
                  </a>
              </span>
            </p>
            <p>
              Docker Registry:
              <span *ngIf="!tool.imgProviderUrl || privateOnlyRegistry"> {{tool?.imgProvider}}</span>
              <span *ngIf="tool.imgProviderUrl && !privateOnlyRegistry">
                <a *ngIf="tool.imgProviderUrl !== null" [href]="tool.imgProviderUrl">
                  {{tool?.imgProvider}}
                  <span class="glyphicon glyphicon-new-window"></span>
                </a>
                <span *ngIf="tool.imgProviderUrl === null">{{tool?.imgProvider}}</span>
              </span>
              <span *ngIf="tool.imgProviderUrl && tool.imgProviderUrl.startsWith('https://quay.io')"
                    class="pull-right">
                <a href="{{tool.imgProviderUrl}}">
                  <img src="{{tool.imgProviderUrl}}/status">
                </a>
              </span>
            </p>

          </div>
        </div>
      </div>
      <div class="panel panel-default" *ngIf="tool">
        <div class="panel-heading">
          <strong>Sharing</strong>
        </div>
        <div class="panel-body">
          <div class="container-sharing">
            <share-buttons class="withCount" [url]="shareURL"
                           [whatsApp]="false" [stumbleUpOn]="false"
                           [pinterest]="false" [tumblr]="false"
                           [showCount]="true" (count)="sumCounts($event)">
            </share-buttons>
          </div>
        </div>
      </div>
      <div class="panel panel-default" *ngIf="tool?.versionVerified">
        <div class="panel-heading">
          <strong>Verified</strong>
        </div>
        <div class="panel-body">
          <div class="container-source-repos">
            <ul class="list-unstyled container-info">
              <li *ngFor="let source of tool?.verifiedSources">
                <p class="ellipsis-lines">
                  {{source}}
                </p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>
</div>
